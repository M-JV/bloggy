doctype html
html
  head
    title Bloggy - Your Creative Space
    link(rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css")
    link(rel="stylesheet" href="/public/styles.css")
    link(href="https://fonts.googleapis.com/css2?family=Lora&family=Merriweather&display=swap" rel="stylesheet")
    link(rel='stylesheet', href='/css/style.css')

  body
    // Navbar
    nav.navbar.navbar-expand-lg.navbar-light.bg-light.shadow-sm.sticky-top
      .container-fluid
        a.navbar-brand(href="/") Bloggy
        button.navbar-toggler(type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav")
          span.navbar-toggler-icon
        .collapse.navbar-collapse#navbarNav
          ul.navbar-nav.ms-auto
            li.nav-item
              a.nav-link(href="/") Home
            li.nav-item
              a.nav-link(href="/posts") All Posts
            
            // Search Box
            form.d-flex(action="/search" method="GET")
              input.form-control.me-2(type="text" name="q" placeholder="Search posts..." required)
              button.btn.btn-outline-success(type="submit") Search

            if user
              li.nav-item
                a.nav-link(href="/posts/new") Create New Post
              
              // Admin links
              if user.isAdmin
                li.nav-item
                  a.nav-link.text-danger(href="/admin/users") Admin: View Users
                li.nav-item
                  a.nav-link.text-danger(href="/admin/posts") Admin: View Posts

              // Show username or "Admin"
              li.nav-item
                span.nav-link.text-primary.fw-bold
                  | ðŸ‘¤ #{user.isAdmin ? 'Admin' : user.username}

              li.nav-item
                a.nav-link(href="/logout") Logout
            else
              li.nav-item
                a.nav-link(href="/login") Login
              li.nav-item
                a.nav-link(href="/register") Register

    // Flash Messages Section
    .container.mt-2
      if success && success.length
        .alert.alert-success.text-center(role="alert")= success[0]

      if error && error.length
        .alert.alert-danger.text-center(role="alert")= error[0]

    // Main Content Area
    .container.mt-4
      block content

    // Footer
    footer.footer.mt-auto.py-3.bg-light.shadow-sm
      .container.text-center
        p &copy; 2025 Bloggy. Inspired by Medium & Notion.

    // Bootstrap Scripts
    script(src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js")
    script.
      setTimeout(() => {
        document.querySelectorAll('.alert').forEach(alert => alert.remove());
      }, 5000);
